---
difficulty: Normal
---

import Player from "@site/src/components/Player";
import Image from "@site/src/components/Image";
import EntrySearch from "@site/src/components/EntrySearch";

# Кинематика при первом входе

:::info[Before Starting]
Перед началом рекомендуется ознакомиться с разделами [Interactions](../01-interactions/index.mdx), [Cinematics](./index.mdx) и [Facts](../03-facts/index.mdx). Убедитесь, что у вас уже есть страница sequence и cinematic.
:::

В этом уроке вы создадите кинематику, которая запускается при первом входе игрока на сервер.

## Добавление элемента Join
Сначала добавьте запись `Add On Player Join` в sequence. Нажмите значок + в правом верхнем углу панели, найдите `Add On Player Join` и кликните по значку +, чтобы добавить его на страницу.

<EntrySearch entryName='on_player_join'/>

## Ожидание взаимодействия
:::danger[Early Start Cinematic]
До полной загрузки мира Typewriter может запустить кинематику преждевременно. Это случается, если у игрока медленное соединение или слабый компьютер. В результате он может оказаться в середине ролика. Чтобы избежать этого, стоит добавить опцию или задержку, требующую действия игрока перед запуском кинематики.
:::
Чтобы добавить такую опцию, обратитесь к странице [Options](../01-interactions/01-options.mdx). В этом уроке мы создадим `New Option` с вариантом `Start Cinematic`.

### Настройка условия
:::warning[Option]
Если вы используете опцию из раздела [ожидание взаимодействия](#waiting-for-interaction), следующие шаги нужно выполнить именно в ней, а **не** в самом начале кинематики.
:::
Теперь настроим условие для кинематики. Нажмите `+` в инспекторе рядом с полем criteria и выберите нужный факт. В этом руководстве это постоянный факт `First Join` с группой, установленной на группу игрока.

<Image img={require("../../assets/cinematics/first-join-fact.png")} alt="first-join-fact" width={400} />

Внутри условия установите оператор `==` и значение `0`.

### Настройка модификатора
Мы задали условие, теперь нужно изменить факт, чтобы при следующем входе кинематика не запускалась. Нажмите `+` у поля modifier и выберите тот же факт. В модификаторе укажите оператор `=` и значение `1`.

В итоге ваш инспектор должен выглядеть так:

<Image img={require("../../assets/cinematics/add-cinematic-fields.png")} alt="add-cinematic-fields" width={400} />

## Добавление `Add Cinematic`
Далее добавьте запись `Add Cinematic` в sequence. Щёлкните правой кнопкой по `New On Player Join` и выберите `+ Link with ...`. Найдите `Add Cinematic` и нажмите +. Теперь ваша страница sequence должна выглядеть так:

<Image img={require("../../assets/cinematics/add-cinematic.png")} alt="Add-Cinematic" width={400} />

В `New Cinematic` выберите ролик, который нужно запустить, через поле page в инспекторе. В нашем примере это `Tutorial_Cin`.

## Результат
Теперь при первом входе игрока на сервер будет воспроизведена кинематика. При следующем входе она уже не запустится.

<Player url={require("../../assets/cinematics/first-join-result.webm").default}/>
