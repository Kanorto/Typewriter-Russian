---
difficulty: Normal
---

import Player from "@site/src/components/Player";
import Image from "@site/src/components/Image";
import EntrySearch from "@site/src/components/EntrySearch";

# Сущности и NPC
:::danger[Entity Extension]
Перед началом этого урока необходимо установить расширение Entity.
:::

Для интересного повествования в мире должны присутствовать и другие персонажи.
Typewriter имеет собственное расширение сущностей, позволяющее создавать и управлять такими NPC.

## Что такое Entity Extension?
Это расширение упрощает создание, управление и контроль сущностей вроде NPC на вашем сервере.

Вот лишь часть его возможностей:
- **Определение сущности** – создание новой сущности с пользовательскими данными и её появление в мире. Её можно использовать на разных серверах.
- **Условное отображение сущностей** – NPC может появляться только на определённой стадии квеста.
- **Активности** – добавление собственных действий, например ночная прогулка к таверне или патрулирование города.

## Создание NPC
Сущности в Typewriter нужно определять на странице `Manifest`.
Создайте новую дефиницию нужного типа сущности – затем её можно будет множество раз использовать через экземпляры.

**NPC** – это особый тип сущности в виде игрока с табличкой имени и индикатором над головой.
С ними проще всего работать, и скорее всего вы будете использовать именно их чаще всего.

### Создание новой дефиниции NPC
Чтобы определить NPC, создайте страницу manifest и добавьте в неё запись NPC. Ниже пример того, как это сделать:

Сначала нажмите **Add Page**.
Выберите тип **Manifest** и задайте любое имя странице.
В примере мы назовём её `Characters`.

Если нужна дополнительная информация о создании страниц, загляните в раздел [Интерфейс](../../02-getting-started/02-layout.mdx).

Далее нужно определить NPC. Нажмите кнопку `Add Entry` или значок `+` в правом верхнем углу,
найдите `Add NPC Definition` и добавьте эту запись на страницу. Теперь она появится перед вами.

<EntrySearch entryName='npc_definition'/>

# Настройка сущности
После создания сущности её можно настроить под свои нужды.

## Изменение имени сущности
Переименуем запись в `Oliver Definition`.

Чтобы изменить отображаемое имя над головой, установите в поле `Display Name` значение `<red><b>Oliver</b></red>`.

<Image img={require("../../assets/entity-extension/entity_name_change.png")} alt="Rename Entry and Entity" width={400} />

## Настройка скина NPC

Скин NPC задаётся полем `Skin`, в которое требуется ввести текстуру и подпись.
Их нужно получить в Minecraft, вручную это сделать непросто.
К счастью, Typewriter умеет генерировать их по uuid игрока или по URL.

Давайте установим Оливеру скин, найденный на [NameMC](https://s.namemc.com/i/b2319359e305d7a2.png).
Нажмите на значок цепочки справа от поля `Skin` и выберите `Fetch from url`.

Введите ссылку `https://s.namemc.com/i/b2319359e305d7a2.png` и нажмите `Fetch`.

<Player url={require("../../assets/entity-extension/fetch_skin.webm").default} />

## Создание экземпляра NPC
NPC ещё не появился в мире, поэтому необходимо добавить запись `Entity Instance`.
У каждого типа сущностей своя запись экземпляра.
Для NPC используется тип `NPC Instance`.

<EntrySearch entryName='npc_instance'/>

Сначала выберите в поле `Definition` созданную ранее дефиницию NPC.
В нашем случае это `Oliver Definition` – она станет основой экземпляра.

<Image img={require("../../assets/entity-extension/definition_select.png")} alt="Definition Select" width={400} />

Осталось указать точку появления NPC.
Именно здесь он будет появляться, когда первый игрок увидит его.

Это можно сделать через селектор режимов контента, получив координаты вашего клиента Minecraft.

<Player url={require("../../assets/entity-extension/entity_location.webm").default} />


Вот и всё!
Теперь у вас есть определение сущности и её экземпляр в мире.
В игре NPC будет отображаться с заданным именем, внешностью и параметрами.

По такому же принципу можно создавать и другие сущности — например, **коров** или **жителей**.
Главное, чтобы тип определения совпадал с типом экземпляра, который вы собираетесь создать.

:::info
Если нужного типа сущности ещё нет в списке определений или экземпляров, напишите об этом на [Discord](https://discord.gg/HtbKyuDDBw).
:::
