---
difficulty: Normal
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import Image from "@site/src/components/Image";

# Факты

Факты — это, по сути, переменные. Они хранят информацию, которую могут изменять другие записи. Все факты являются числами и обрабатываются как таковые.

В [`Basic Extension`](../../../adapters/BasicAdapter/BasicAdapter.mdx) содержится множество готовых фактов. Кроме того, [`расширения`](../../../adapters/README.mdx) могут расширять их список.

## Зачем нужны факты?

Факты играют важную роль в создании динамического контента и настройке поведения системы. Вот почему стоит применять факты:

- **Динамические задания:** отслеживайте прогресс игрока в квестах, используя факты для хранения и изменения статуса.

- **Персонализация:** настройте игровой процесс с помощью фактов, например уровень сложности или характеристики персонажа.

- **Интерактивное повествование:** запоминайте выборы и действия игрока при помощи фактов, формируя развивающуюся историю.

- **Система достижений:** фиксируйте ключевые этапы и успехи, используя факты.

### Типы фактов

Факты бывают двух видов: читаемые и изменяемые.

- **Читаемые факты:** используются в критериях записи. Например, проверяется, есть ли у игрока определённый предмет в инвентаре.
- **Изменяемые факты:** применяются в модификаторах для изменения значения факта, например обновления прогресса квеста.

:::info
Некоторые факты могут быть и читаемыми, и изменяемыми. Например, [permanent fact](../../../adapters/BasicAdapter/entries/fact/permanent_fact) можно использовать и в критериях, и в модификаторах.
Но часть фактов только читаемая. К примеру, [inventory item count fact](../../../adapters/BasicAdapter/entries/fact/inventory_item_count_fact) применяется лишь в критериях.
:::

## Группы

Для факта можно выбрать группу. Существует три типа групп:

- **Global**: задаёт факт для всех игроков.
- **World**: задаёт факт для всех игроков в выбранном мире.
- **Player**: задаёт факт для конкретного игрока.

## Поля

В некоторых записях есть поля, которые определяют обработку фактов.

<Image img={require("../../assets/facts/criteria_and_modifier.png")} alt="Поля критериев и модификаторов" width={400} />

### Критерии

Критерий — это условие для записи, например `если факт = 10, то...`. От него зависит, будет ли выполнена запись.

<Image img={require("../../assets/facts/criteria.png")} alt="Поле критериев" width={400} />

При работе с критериями выполните следующие шаги:

1. Выберите факт, который нужно проверить.
2. Выберите оператор.
3. Укажите значение для проверки.

### Модификаторы

Модификаторы, как видно из названия, изменяют факт.

<Image img={require("../../assets/facts/modifier.png")} alt="Поле модификатора" width={400} />

При работе с модификаторами выполните следующие шаги:

1. Выберите факт, который нужно изменить.
2. Выберите оператор. Можно установить значение (=) или прибавить к текущему (+).
3. Укажите значение для изменения.

:::warning
Модификаторы выполняются только при срабатывании записи.
Если у записи есть критерии и **хотя бы один** из них `false`, запись не выполнится и факт не изменится.
:::

## Учебник

Чтобы начать работу с фактами, мы создадим постоянный факт для отслеживания прогресса в квесте.

1. Создайте новую страницу и выберите тип `static`. Назовите её `Playerprogress`
2. Нажмите значок `+` и выберите `Add Permanent Fact`. Переименуйте факт в `Playerprogress` и добавьте комментарий.
    <Image img={require("../../assets/facts/static-page.png")} alt='Кнопка "Static page"' />
3. Выберите группу Player.
4. На странице последовательности нажмите на действие.
   - Задайте **критерий:** проверьте, равен ли `Playerprogress` 0.
   - Задайте **модификатор:** если критерий выполнен, установите `Playerprogress` в 1.
5. Создайте дополнительные действия для разных этапов квеста, изменяя `Playerprogress` соответственно.

## Примеры

Система фактов открывает множество возможностей. Ниже несколько примеров:

<Tabs groupId="example" queryString>
   <TabItem value="Gathering Items Quest" label="Сбор предметов" default>
      **Задача:** игрок разговаривает с NPC и должен собрать предметы.

      **Используемый факт:**
      - **Читаемый факт:** [Inventory Item Count](../../../adapters/BasicAdapter/entries/fact/inventory_item_count_fact)

      **Сценарий:**
      1. Игрок разговаривает с NPC.
      2. Проверьте критерий с помощью факта количества предметов в инвентаре, чтобы убедиться, что у игрока есть нужные предметы.

   </TabItem>
   <TabItem value="Progression Tracking" label="Отслеживание прогресса">
      **Задача:** отслеживать продвижение игрока по этапам квеста.

      **Используемый факт:**
      - **Изменяемый факт:** [Permanent Fact](../../../adapters/BasicAdapter/entries/fact/permanent_fact)

      **Сценарий:**
      1. Игрок разговаривает с NPC (прогресс = 1).
      2. Выполняет определённое действие (прогресс = 2).
      3. Завершает квест (прогресс = 3).

   </TabItem>
   <TabItem value="Balance check" label="Проверка баланса">
      **Задача:** проверить, достаточно ли у игрока денег для покупки предмета.

      **Используемый факт:**
      - **Читаемый факт:** [Balance Fact](../../../adapters/VaultAdapter/entries/fact/balance_fact.mdx)

      **Сценарий:**
      1. Игрок разговаривает с NPC.
      2. Проверяем критерий с использованием факта баланса, чтобы узнать, достаточно ли средств.
      3. Если средств достаточно, игрок может купить предмет.
      4. Если денег не хватает, показать игроку сообщение.

   </TabItem>
</Tabs>

:::tip
Чтобы узнать о всех доступных фактах, загляните в раздел [Extensions](../../../adapters/README.mdx).
:::
