---
difficulty: Normal
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import Image from "@site/src/components/Image";

# Факты

Факты по сути представляют собой переменные. Они хранят данные, которые могут быть изменены другими элементами. Все факты являются числами и обрабатываются как таковые.

[`Базовое расширение`](../../../adapters/BasicAdapter/BasicAdapter.mdx) включает множество доступных фактов. Также стоит помнить, что [`расширения`](../../../adapters/README.mdx) могут дополнительно увеличивать их список.

## Зачем нужны факты?

Факты играют ключевую роль в создании динамичного контента и настройке поведения системы. Ниже перечислены причины использовать факты:

- **Динамичные задания:** отслеживайте прогресс игрока, сохраняя и изменяя состояние выполнения при помощи фактов.
- **Кастомизация:** персонализируйте игровой процесс, используя факты для изменения параметров игры, таких как уровень сложности или характеристики персонажа.
- **Интерактивный сюжет:** улучшайте повествование, запоминая выбор и действия игрока с помощью фактов и формируя развивающуюся историю.
- **Система достижений:** реализуйте учёт достижений, фиксируя определённые этапы и успехи через факты.

### Типы фактов
Факты бывают двух типов: читаемые и записываемые.
- **Читаемые факты:** используются в критериях элемента. Например, проверка наличия предмета в инвентаре игрока.
- **Записываемые факты:** используются в модификаторах для изменения значения факта, к примеру обновления прогресса задания игрока.

:::info
Некоторые факты являются и читаемыми, и записываемыми. Например, [постоянный факт](../../../adapters/BasicAdapter/entries/fact/permanent_fact) можно использовать как в критериях, так и в модификаторах.
Но есть факты только для чтения. К примеру, [факт количества предметов в инвентаре](../../../adapters/BasicAdapter/entries/fact/inventory_item_count_fact) можно применять лишь в критериях.
:::

## Группы
В факте можно выбрать группу. Существует три типа групп:
- **Global**: устанавливает факт для всех игроков.
- **World**: устанавливает факт для всех игроков в определённом мире.
- **Player**: устанавливает факт для конкретного игрока.

## Поля
В некоторых элементах есть поля, которые влияют на обработку фактов.
<Image img={require("../../assets/facts/criteria_and_modifier.png")} alt="Поля критериев и модификаторов" width={400} />


### Критерии
Критерий — это условие для элемента, например `if fact = 10 then...`. Он определяет, будет ли выполнен элемент.
<Image img={require("../../assets/facts/criteria.png")} alt="Поле критериев" width={400} />
При использовании критериев следуйте шагам:
1. Выберите факт для проверки.
2. Выберите оператор.
3. Укажите значение, с которым нужно сравнить факт.
### Модификаторы
Модификаторы, как следует из названия, изменяют факт.
<Image img={require("../../assets/facts/modifier.png")} alt="Поле модификатора" width={400} />
При использовании модификаторов выполните следующие шаги:
1. Выберите факт для изменения.
2. Выберите оператор. Можно напрямую задать значение (=) или прибавить к нему (+).
3. Укажите значение, которое будет применено оператором.

:::warning
Модификаторы выполняются только при исполнении элемента.
Если у элемента есть критерии и **хотя бы один из них** ложный, элемент не будет выполнен и факт не изменится.
:::
## Учебное пособие
Чтобы начать работу с фактами, используем постоянный факт для отслеживания прогресса в задании.
1. Создайте новую страницу и выберите тип `static`. Назовите её `Playerprogress`
2. Нажмите на значок + и выберите `Add Permanent Fact`. Переименуйте факт в `Playerprogress` и добавьте комментарий.
    <Image img={require("../../assets/facts/static-page.png")} alt="Кнопка статической страницы" />
3. Выберите группу «player».
4. На странице последовательности нажмите на действие.
   - Установите **критерий:** проверить, что `Playerprogress` == 0.
   - Установите **модификатор:** если критерии выполнены, изменить `Playerprogress` на 1.
5. Создайте дополнительные действия для разных стадий задания, соответствующим образом изменяя `Playerprogress`.

## Примеры
С системой фактов можно реализовать множество вариантов. Ниже приведены несколько примеров:

<Tabs groupId="example" queryString>
   <TabItem value="Gathering Items Quest" label="Gathering Items Quest" default>
      **Цель:** игрок разговаривает с NPC и должен собрать предметы.

      **Используемый факт:**
      - **Читаемый факт:** [Inventory Item Count](../../../adapters/BasicAdapter/entries/fact/inventory_item_count_fact)

      **Сценарий:**
      1. Игрок разговаривает с NPC.
      2. Проверяем критерий с помощью факта количества предметов, чтобы убедиться, что нужные предметы у игрока есть.

   </TabItem>
   <TabItem value="Progression Tracking" label="Progression Tracking">
      **Цель:** отслеживать прохождение игроком различных стадий задания.

      **Используемый факт:**
      - **Записываемый факт:** [Permanent Fact](../../../adapters/BasicAdapter/entries/fact/permanent_fact)

      **Сценарий:**
      1. Игрок разговаривает с NPC (прогресс устанавливается в 1).
      2. Выполняет определённое действие (прогресс устанавливается в 2).
      3. Завершает задание (прогресс устанавливается в 3).

   </TabItem>
   <TabItem value="Balance check" label="Balance check">
      **Цель:** проверить, хватает ли у игрока денег на покупку предмета.

      **Используемый факт:**
      - **Читаемый факт:** [Balance Fact](../../../adapters/VaultAdapter/entries/fact/balance_fact.mdx)

      **Сценарий:**
      1. Игрок разговаривает с NPC.
      2. Проверяем критерий с помощью факта баланса, чтобы узнать, достаточно ли у игрока средств.
      3. Если денег хватает, игрок может купить предмет.
      4. Если средств недостаточно, выводим сообщение игроку.

   </TabItem>
</Tabs>

:::tip
Чтобы увидеть все доступные факты, загляните в раздел [Extensions](../../../adapters/README.mdx).
:::
