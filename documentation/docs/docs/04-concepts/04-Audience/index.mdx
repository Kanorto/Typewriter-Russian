---
difficulty: Easy
---

import RiveBoard from "@site/src/components/RiveBoard";

# Записи аудитории

Записи аудитории — это особый вид [Manifest Entry](./Manifest), который используется для условного отображения контента группе игроков.
Игроки могут входить в аудиторию записи.
Иными словами, содержимое записи аудитории будет показано игрокам, находящимся в её аудитории.

Существует два типа записей аудитории:

### Audience Display Entry

Audience Display предназначен для отображения контента группе игроков.
Это могут быть, например, наложение эффекта зелья или показ полоски босса.

### Audience Filter Entry

Audience Filter имеет список дочерних записей, в который могут входить как Audience entries, так и другие Audience Filter.
Они используются для фильтрации аудитории Audience Display Entry.

Audience Filters могут:

#### Отфильтровывать игроков
Фильтровать свою аудиторию и аудиторию своих детей. Например, `CriteriaAudience` допускает игроков, соответствующих определённым критериям.

#### Отображать контент
Отображать контент так же, как обычный Audience Display Entry, но используя детей для определения того, что именно показать. Как это делает `Sidebar` с записями `Lines`.


# Как работает фильтрация?

Когда игрок заходит на сервер, его добавляют во все корневые записи аудитории.
Корневая запись — это запись без родителей.

## Корневые записи

<RiveBoard stateMachines="State Machine 1" artboard="Roots" aspectRatio={500/300} src={require('./assets/audience_entries.riv').default} />


Как видно выше, любой элемент без родителей является корневым.
Фильтры всё равно могут разрешать или запрещать игрокам находиться в их собственной аудитории.
Однако если ничего не связано, они не влияют на аудиторию других записей.

## Цепочки фильтров

Мы можем соединять фильтры, чтобы создавать более сложные условия.
Теперь игрок попадает в `Display` только если выполнены оба условия.

<RiveBoard stateMachines="State Machine 1" artboard="Chained" aspectRatio={500/350} src={require('./assets/audience_entries.riv').default} />

Попробуйте включать и выключать некоторые условия и посмотрите, что произойдёт.

## Несколько родителей

Когда у записи несколько родителей, игрок находится в её аудитории, если хотя бы один из родителей допускает его.

<RiveBoard stateMachines="State Machine 1" artboard="Or" aspectRatio={500/310} src={require('./assets/audience_entries.riv').default} />

Попробуйте включать и выключать некоторые условия и посмотрите, что произойдёт.
