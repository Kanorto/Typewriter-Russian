---
difficulty: Easy
---

import RiveBoard from "@site/src/components/RiveBoard";

# Записи аудитории

Audience entries — это особый вид [Manifest Entry](./Manifest), который позволяет показывать контент выбранной группе игроков.
Игроки могут находиться в аудитории записи.
Иначе говоря, содержимое такой записи увидят только те игроки, которые входят в её аудиторию.

Существует два типа записей аудитории:

### Audience Display Entry

Audience Display предназначена для показа контента группе игроков.
Это может быть наложение эффекта, отображение полоски босса и тому подобное.

### Audience Filter Entry

Audience Filter имеет список дочерних элементов, среди которых могут быть как Audience entries, так и другие Audience Filter.
Такая запись используется для фильтрации аудитории Audience Display Entry.

Audience Filters могут:

#### Filter Players
Фильтровать собственную аудиторию и аудиторию дочерних записей. Например, `CriteriaAudience` допускает игроков в аудиторию только если они соответствуют заданным условиям.

#### Display Content
Показывать контент так же, как обычная Audience Display Entry, используя при этом дочерние записи для определения, что именно отобразить. Так, `Sidebar` использует записи `Lines`.


# Как работает фильтрация?

Когда игрок заходит на сервер, он добавляется во все корневые записи аудитории.
Корневая запись — это запись без родительских элементов.

## Корневые записи

<RiveBoard stateMachines="State Machine 1" artboard="Roots" aspectRatio={500/300} src={require('./assets/audience_entries.riv').default} />


Как показано выше, любая запись без родителей является корневой.
Фильтры всё равно могут допускать или исключать игроков из собственной аудитории.
Но если ничего не связано, они не влияют на аудиторию других записей.

## Цепочки

Фильтры можно соединять в цепочки, чтобы получить более сложную структуру.
В этом случае игрок попадёт в `Display` только при выполнении обеих условий.

<RiveBoard stateMachines="State Machine 1" artboard="Chained" aspectRatio={500/350} src={require('./assets/audience_entries.riv').default} />

Попробуйте включать и выключать различные условия и посмотрите, что произойдёт.

## Несколько родителей

Если у записи несколько родителей, игрок будет в её аудитории, если хотя бы один из родителей разрешит это.

<RiveBoard stateMachines="State Machine 1" artboard="Or" aspectRatio={500/310} src={require('./assets/audience_entries.riv').default} />

Попробуйте включать и выключать разные условия и наблюдайте за результатом.
